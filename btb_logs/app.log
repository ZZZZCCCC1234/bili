[2025-05-21:12:09:06.385]|DEBUG|util:75|设置路径, FILES_ROOT_PATH=/Users/bilibili/ticker/bili TEMP_PATH=/Users/bilibili/ticker/bili/tmp EXE_PATH=/usr/local/Cellar/python@3.11/3.11.12/Frameworks/Python.framework/Versions/3.11/bin
[2025-05-21:12:09:06.436]|INFO|util.TimeUtil:32|时间同步成功, 将使用ntp.aliyun.com时间
[2025-05-21:12:09:06.437]|INFO|util.TimeUtil:45|设置时间偏差为: -0.1374秒
[2025-05-21:12:09:06.447]|INFO|__main__:16|启动浏览器中，第一次启动会比较慢，请使用在浏览器登录
[2025-05-21:12:09:09.221]|INFO|__main__:23|浏览器启动, 进行登录.
[2025-05-21:12:09:09.872]|ERROR|__main__:31|登录失败: Page.wait_for_selector: Target page, context or browser has been closed
Call log:
waiting for locator(".user-center-link")

[2025-05-21:12:09:10.106]|ERROR|__main__:80|An error has been caught in function '<module>', process 'MainProcess' (40594), thread 'MainThread' (140704430119872):
Traceback (most recent call last):

> File "/Users/bilibili/ticker/bili/util/CookieManager.py", line 80, in <module>
    cookies = cookie_manager._login_and_save_cookies()
              │              └ <function CookieManager._login_and_save_cookies at 0x11c472de0>
              └ <__main__.CookieManager object at 0x11bfe0c90>

  File "/Users/bilibili/ticker/bili/util/CookieManager.py", line 24, in _login_and_save_cookies
    page.wait_for_selector(".user-center-link", timeout=0, state="attached")
    │    └ <function Page.wait_for_selector at 0x11c1e6d40>
    └ <Page url='https://show.bilibili.com/platform/home.html'>

  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/sync_api/_generated.py", line 8001, in wait_for_selector
    self._sync(
    │    └ <function SyncBase._sync at 0x11c1bb060>
    └ <Page url='https://show.bilibili.com/platform/home.html'>
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           │    └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-8' coro=<Page.wait_for_selector() done, defined at /Users/bilibili/.virtualenvs/.bilivenv/lib/pytho...
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_page.py", line 397, in wait_for_selector
    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))
                 │    │           │                   └ <function locals_to_params at 0x11c0c0720>
                 │    │           └ <function Frame.wait_for_selector at 0x11c161620>
                 │    └ <Frame name= url='https://show.bilibili.com/platform/home.html'>
                 └ <Page url='https://show.bilibili.com/platform/home.html'>
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_frame.py", line 323, in wait_for_selector
    await self._channel.send("waitForSelector", locals_to_params(locals()))
          │    │        │                       └ <function locals_to_params at 0x11c0c0720>
          │    │        └ <function Channel.send at 0x11c0c1300>
          │    └ <playwright._impl._connection.Channel object at 0x11c73cd10>
          └ <Frame name= url='https://show.bilibili.com/platform/home.html'>
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_connection.py", line 59, in send
    return await self._connection.wrap_api_call(
                 │    │           └ <function Connection.wrap_api_call at 0x11c0c3240>
                 │    └ <playwright._impl._connection.Connection object at 0x11c488050>
                 └ <playwright._impl._connection.Channel object at 0x11c73cd10>
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_connection.py", line 514, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
          └ <function rewrite_error at 0x11bfd9620>

playwright._impl._errors.TargetClosedError: Page.wait_for_selector: Target page, context or browser has been closed
Call log:
waiting for locator(".user-center-link")

[2025-05-21:14:12:30.274]|DEBUG|util:75|设置路径, FILES_ROOT_PATH=/Users/bilibili/ticker/bili TEMP_PATH=/Users/bilibili/ticker/bili/tmp EXE_PATH=/usr/local/Cellar/python@3.11/3.11.12/Frameworks/Python.framework/Versions/3.11/bin
[2025-05-21:14:12:30.344]|INFO|util.TimeUtil:32|时间同步成功, 将使用ntp.aliyun.com时间
[2025-05-21:14:12:30.344]|INFO|util.TimeUtil:45|设置时间偏差为: -0.09288秒
[2025-05-21:14:12:30.375]|INFO|__main__:16|启动浏览器中，第一次启动会比较慢，请使用在浏览器登录
[2025-05-21:14:12:37.386]|INFO|__main__:23|浏览器启动, 进行登录.
[2025-05-21:14:12:37.938]|ERROR|__main__:31|登录失败: Page.wait_for_selector: Target page, context or browser has been closed
Call log:
waiting for locator(".user-center-link")

[2025-05-21:14:12:38.165]|ERROR|__main__:80|An error has been caught in function '<module>', process 'MainProcess' (46576), thread 'MainThread' (140704430119872):
Traceback (most recent call last):

> File "/Users/bilibili/ticker/bili/util/CookieManager.py", line 80, in <module>
    cookies = cookie_manager._login_and_save_cookies()
              │              └ <function CookieManager._login_and_save_cookies at 0x124836ca0>
              └ <__main__.CookieManager object at 0x124047cd0>

  File "/Users/bilibili/ticker/bili/util/CookieManager.py", line 24, in _login_and_save_cookies
    page.wait_for_selector(".user-center-link", timeout=0, state="attached")
    │    └ <function Page.wait_for_selector at 0x1245aad40>
    └ <Page url='https://show.bilibili.com/platform/home.html'>

  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/sync_api/_generated.py", line 8001, in wait_for_selector
    self._sync(
    │    └ <function SyncBase._sync at 0x12457f060>
    └ <Page url='https://show.bilibili.com/platform/home.html'>
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           │    └ <method 'result' of '_asyncio.Task' objects>
           └ <Task finished name='Task-8' coro=<Page.wait_for_selector() done, defined at /Users/bilibili/.virtualenvs/.bilivenv/lib/pytho...
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_page.py", line 397, in wait_for_selector
    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))
                 │    │           │                   └ <function locals_to_params at 0x124488720>
                 │    │           └ <function Frame.wait_for_selector at 0x124525620>
                 │    └ <Frame name= url='https://show.bilibili.com/platform/home.html'>
                 └ <Page url='https://show.bilibili.com/platform/home.html'>
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_frame.py", line 323, in wait_for_selector
    await self._channel.send("waitForSelector", locals_to_params(locals()))
          │    │        │                       └ <function locals_to_params at 0x124488720>
          │    │        └ <function Channel.send at 0x124489300>
          │    └ <playwright._impl._connection.Channel object at 0x113407210>
          └ <Frame name= url='https://show.bilibili.com/platform/home.html'>
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_connection.py", line 59, in send
    return await self._connection.wrap_api_call(
                 │    │           └ <function Connection.wrap_api_call at 0x12448b240>
                 │    └ <playwright._impl._connection.Connection object at 0x123f7b7d0>
                 └ <playwright._impl._connection.Channel object at 0x113407210>
  File "/Users/bilibili/.virtualenvs/.bilivenv/lib/python3.11/site-packages/playwright/_impl/_connection.py", line 514, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
          └ <function rewrite_error at 0x12439d620>

playwright._impl._errors.TargetClosedError: Page.wait_for_selector: Target page, context or browser has been closed
Call log:
waiting for locator(".user-center-link")

